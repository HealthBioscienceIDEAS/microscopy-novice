<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Image Analysis for Microscopy: Filetypes and metadata</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav IDEAS"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="IDEAS" src="../assets/images/IDEAS-logo.svg"><abbr class="badge badge-light" title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught." style="background-color: #FF4955; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link" style="color: #000">
            <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
            Pre-Alpha
          </a>
          <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
        </abbr>

      </div>
    </div>
    <div class="selector-container">


      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../filetypes-and-metadata.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav IDEAS" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="IDEAS" src="../assets/images/IDEAS-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Image Analysis for Microscopy
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Image Analysis for Microscopy
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Image Analysis for Microscopy
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 39%" class="percentage">
    39%
  </div>
  <div class="progress IDEAS">
    <div class="progress-bar IDEAS" role="progressbar" style="width: 39%" aria-valuenow="39" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../filetypes-and-metadata.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="imaging-software.html">1. Imaging Software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="what-is-an-image.html">2. What is an image?</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="image-display.html">3. Image display</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="multi-dimensional-images.html">4. Multi-dimensional images</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        5. Filetypes and metadata
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#image-file-formats">Image file formats</a></li>
<li><a href="#metadata">Metadata</a></li>
<li><a href="#pixel-size">Pixel size</a></li>
<li><a href="#choosing-a-file-format">Choosing a file format</a></li>
<li><a href="#common-file-formats">Common file formats</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="designing-a-light-microscopy-experiment.html">6. Designing a light microscopy experiment</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="choosing-acquisition-settings.html">7. Choosing acquisition settings</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="quality-control-and-manual-segmentation.html">8. Quality control and manual segmentation</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="filters-and-thresholding.html">9. Filters and thresholding</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="instance-segmentation-and-measurements.html">10. Instance segmentation and measurements</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="additional-resources.html">11. Additional resources</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/multi-dimensional-images.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/designing-a-light-microscopy-experiment.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/multi-dimensional-images.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Multi-dimensional
        </a>
        <a class="chapter-link float-end" href="../instructor/designing-a-light-microscopy-experiment.html" rel="next">
          Next: Designing a light...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Filetypes and metadata</h1>
        <p>Last updated on 2025-10-29 |

        <a href="https://github.com/HealthBioscienceIDEAS/microscopy-novice/edit/main/episodes/filetypes-and-metadata.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 55 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>Which file formats should be used for microscopy images?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Explain the pros and cons of some popular image file formats</li>
<li>Explain the difference between lossless and lossy compression</li>
<li>Inspect image metadata with the BioIO package</li>
<li>Inspect and set an image’s scale in Napari</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="image-file-formats">Image file formats<a class="anchor" aria-label="anchor" href="#image-file-formats"></a></h2>
<hr class="half-width"><p>Images can be saved in a wide variety of file formats. You may be
familiar with many of these like JPEG (files ending with .jpg or .jpeg
extension), PNG (.png extension) or TIFF (.tiff or .tif extension).
Microscopy images have an especially wide range of options, with
hundreds of different formats in use, often specific to particular
microscope manufacturers. With this being said, how do we choose which
format(s) to use in our research? It’s worth bearing in mind that the
best format to use will vary depending on your research question and
experimental workflow - so you may need to use different formats on
different research projects.</p>
</section><section><h2 class="section-heading" id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a></h2>
<hr class="half-width"><p>First, let’s look closer at what gets stored inside an image
file.</p>
<p>There are two main things that get stored inside image files:
<em>pixel values</em> and <em>metadata</em>. We’ve looked at pixel
values in previous episodes (<a href="what-is-an-image.html">What is an
image?</a>, <a href="image-display.html">Image display</a> and <a href="multi-dimensional-images.html">Multi-dimensional images</a>
episodes) - this is the raw image data as an array of numbers with
specific dimensions and data type. The metadata, on the other hand, is a
wide variety of additional information about the image and how it was
acquired.</p>
<p>For example, let’s take a look at the metadata in the
‘Plate1-Blue-A-12-Scene-3-P3-F2-03.czi’ file we downloaded as part of
the <a href="index.html#setup">setup instructions</a>. To browse the metadata
we will use the <a href="https://bioio-devs.github.io/bioio/OVERVIEW.html" class="external-link">BioIO
package</a>, along with its corresponding napari plugin: <a href="https://napari-hub.org/plugins/napari-bioio-reader.html" class="external-link">napari-bioio-reader</a>.
BioIO allows a wide variety of file formats to be opened in python and
Napari that aren’t supported by default. BioIO was already installed in
the <a href="index.html#setup">setup instructions</a>, so you should be able
to start using it straight away.</p>
<p>Let’s open the ‘Plate1-Blue-A-12-Scene-3-P3-F2-03.czi’ file by
removing any existing image layers, then dragging and dropping it onto
the canvas. If a pop-up menu appears, select ‘BioIO Reader’. Note this
can take a while to open, so give it some time! Alternatively, you can
select in Napari’s top menu-bar:<br><code>File &gt; Open File(s)...</code></p>
<figure><img src="../fig/plate1-czi-napari.png" alt="A screenshot of yeast sample data shown in  Napari" class="figure mx-auto d-block"></figure><p>This image is part of a <a href="https://idr.openmicroscopy.org/search/?query=Name:idr0011-ledesmafernandez-dad4/screenD" class="external-link">published
dataset on Image Data Resource</a> (accession number idr0011), and comes
from the <a href="https://downloads.openmicroscopy.org/images/Zeiss-CZI/idr0011/" class="external-link">OME
sample data</a>. It is a 3D fluorescence microscopy image of yeast with
three channels (we’ll explore what these channels represent in the <a href="#exploring-metadata">Exploring metadata exercise</a>).</p>
<p>In this case, Napari hasn’t automatically recognised the three
channels - so it is loaded as one combined image layer. Recall that we
looked at how Napari handles channels in the <a href="multi-dimensional-images.html#channels">multi-dimensional images
episode</a>.</p>
<p>To split the image into its individual channels, and to browse its
metadata, let’s explore with <code>BioIO</code> in napari’s console.</p>
<p>Open the console and run:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">from</span> bioio <span class="im">import</span> BioImage</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># get the file path from the image layer</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>image_path <span class="op">=</span> viewer.layers[<span class="dv">0</span>].source.path</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>image <span class="op">=</span> BioImage(image_path)</span></code></pre>
</div>
<p>Now we can explore some of the image’s properties:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">print</span>(image.dims) <span class="co"># print size of each axis (in pixels)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;Dimensions [T: 1, C: 3, Z: 21, Y: 512, X: 672]&gt;</code></pre>
</div>
<p>BioIO always loads images as <code>(t, c, z, y, x)</code> - time,
then channels, then the 3 spatial image dimensions. You’ll notice this
image has a ‘time’ axis with length 1 i.e. this dataset only represents
a single timepoint.</p>
<p>We can browse a small summary of common metadata with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">print</span>(image.standard_metadata)</span></code></pre>
</div>
<p>This includes the image dimensions, the date/time the image was
acquired, as well as information about the pixel size
(<code>pixel_size_x</code>, <code>pixel_size_y</code>,
<code>pixel_size_z</code>). The pixel size is essential for making
accurate quantitative measurements from our images, and will be
discussed <a href="#pixel-size">in the next section of this
episode</a>.</p>
<div id="exploring-metadata-in-the-console" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="exploring-metadata-in-the-console" class="callout-inner">
<h3 class="callout-title">Exploring metadata in the console</h3>
<div class="callout-content">
<p>You can use python’s <a href="https://github.com/Textualize/rich" class="external-link">rich</a> library to add
colour-coding to make the output easier to read:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> rich</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>rich.<span class="bu">print</span>(image.standard_metadata)</span></code></pre>
</div>
<figure><img src="../fig/metadata-console.png" alt="Screenshot of metadata printed to Napari's  console" class="figure mx-auto d-block"></figure><p>If you’d prefer not to have colour-coding, but keep the clearer
formatting of one item per line - you can run this instead:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> pprint</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>pprint.pp(image.standard_metadata)</span></code></pre>
</div>
</div>
</div>
</div>
<p>We can browse the full metadata with:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>metadata <span class="op">=</span> image.ome_metadata</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="bu">print</span>(metadata)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>OME(
   experimenters=[{'id': 'Experimenter:0', 'user_name': 'Zeiss'}],
   instruments=[&lt;1 field_type&gt;],
   images=[&lt;1 field_type&gt;],
)</code></pre>
</div>
<p>In this case, we can see it is split into three categories:
<code>experimenters</code>, <code>images</code> and
<code>instruments</code>. You can look inside each of these using
<code>.category</code> e.g.:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">print</span>(metadata.instruments)</span></code></pre>
</div>
<p>The metadata is nested, so we can keep going deeper e.g.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">print</span>(metadata.instruments[<span class="dv">0</span>].objectives)</span></code></pre>
</div>
<p>This metadata is a vital record of exactly how the image was acquired
and what it represents. As we’ve mentioned in previous episodes - it’s
important to maintain this metadata as a record for the future. It’s
also essential to allow us to make quantitative measurements from our
images, by understanding factors like the pixel size. Converting between
file formats can result in loss of metadata, so it’s always worthwhile
keeping a copy of your image safely in its original raw file format. You
should take extra care to ensure that additional processing steps don’t
overwrite this original image.</p>
<div id="exploring-metadata" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exploring-metadata" class="callout-inner">
<h3 class="callout-title">Exploring metadata</h3>
<div class="callout-content">
<p>Explore the metadata in the console to answer the following
questions:</p>
<ul><li>What type of microscope was used to take this image?</li>
<li>What detector was used to take this image?</li>
<li>What does each channel show? For example, which fluorophore is used?
What is its excitation and emission wavelength? (hint: look inside the
image’s pixel metadata: <code>metadata.images[0].pixels</code>)</li>
</ul></div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="section level3">
<h3 id="microscope-model">Microscope model<a class="anchor" aria-label="anchor" href="#microscope-model"></a></h3>
<p>Under <code>metadata.instruments[0].microscope</code>, we can see
that an ‘Axio Imager Z2’ microscope was used.</p>
</div>
<div class="section level3">
<h3 id="detector">Detector<a class="anchor" aria-label="anchor" href="#detector"></a></h3>
<p>Under <code>metadata.instruments[0].detectors</code>, we can see that
this used an HDCamC10600-30B (ORCA-R2) detector.</p>
</div>
<div class="section level3">
<h3 id="channels">Channels<a class="anchor" aria-label="anchor" href="#channels"></a></h3>
<p>Under <code>metadata.images[0].pixels.channels</code>, we can see one
entry per channel - <code>Channel:0:0</code>, <code>Channel:0:1</code>
and <code>Channel:0:2</code>.</p>
<p>In the first (<code>metadata.images[0].pixels.channels[0]</code>), we
can see that its <code>name</code> is TagYFP, a fluorophore with
<code>emission_wavelength</code> of 524nm and
<code>excitation_wavelength</code> of 508nm.</p>
<p>In the first (<code>metadata.images[0].pixels.channels[1]</code>), we
can see that its <code>name</code> is mRFP1.2, a fluorophore with
<code>emission_wavelength</code> of 612nm and
<code>excitation_wavelength</code> of 590nm.</p>
<p>In the first (<code>metadata.images[0].pixels.channels[2]</code>), we
see that its name is <code>TL DIC</code> and no
<code>emission_wavelength</code> or <code>excitation_wavelength</code>
is listed. Its <code>illumination_type</code> is listed as
‘transmitted’, so this is simply an image of the yeast cells with no
fluorophores used.</p>
</div>
</div>
</div>
</div>
</div>
<div id="bioio-image-metadata-support" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="bioio-image-metadata-support" class="callout-inner">
<h3 class="callout-title">BioIO image / metadata support</h3>
<div class="callout-content">
<p>BioIO supports various file formats via <a href="https://bioio-devs.github.io/bioio/OVERVIEW.html#reader-installation" class="external-link">its
different readers</a>. During the <a href="index.html#setup">setup
instructions</a>, we installed the <code>bioio-czi</code> reader to
allow us to open the <code>czi</code> image for this lesson.</p>
<p>If you want to open more types of file, you will have to install the
relevant reader following the <a href="https://bioio-devs.github.io/bioio/OVERVIEW.html" class="external-link">intructions in
the BioIO docs</a>. Note the <code>bioio-bioformats</code> reader should
allow a wide range of file formats to be read.</p>
<p>If you have difficulty opening a specific file format with BioIO,
it’s worth trying to open it in <a href="https://imagej.net/software/fiji/" class="external-link">Fiji</a> also. Fiji has very
well established integration with Bio-Formats, and so tends to support a
wider range of formats. Note that you can always save your image (or
part of your image) as another format like .tiff via Fiji to open in
Napari later (making sure you still retain a copy of the original file
and its metadata!)</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="pixel-size">Pixel size<a class="anchor" aria-label="anchor" href="#pixel-size"></a></h2>
<hr class="half-width"><p>One of the most important pieces of metadata is the pixel size. In
our .czi image, this is stored as:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="bu">print</span>(image.physical_pixel_sizes)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">PhysicalPixelSizes</span><span class="op">(</span>Z<span class="op">=</span><span class="fl">0.35</span>, Y<span class="op">=</span><span class="fl">0.20476190476190476</span>, X<span class="op">=</span><span class="fl">0.20476190476190476</span><span class="op">)</span></span></code></pre>
</div>
<p>The pixel size states how large a pixel is in physical units
i.e. ‘real world’ units of measurement like micrometre, or millimetre.
In this case the unit is ‘μm’ (micrometre). This means that each pixel
has a size of 0.20μm (x axis), 0.20μm (y axis) and 0.35μm (z axis). As
this image is 3D, you will sometimes hear the pixels referred to as
‘voxels’, which is just a term for a 3D pixel.</p>
<p>The pixel size is important to ensure that any measurements made on
the image are correct. For example, how long is a particular cell? Or
how wide is each nucleus? These answers can only be correct if the pixel
size is properly set. It’s also useful when we want to overlay different
images on top of each other (potentially acquired with different kinds
of microscope) - setting the pixel size appropriately will ensure their
overall size matches correctly in the Napari viewer.</p>
<p>Let’s open the image in napari again, split by individual channels
and with the pixel size set correctly. First, remove the
<code>Plate1-Blue-A-12-Scene-3-P3-F2-03.czi</code> layer, then run:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Get the numpy array and remove the un-needed time axis</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>image_np <span class="op">=</span> image.data[<span class="dv">0</span>,]</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Display it, giving the correct 'channel_axis' to split on + pixel size</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>viewer.add_image(image_np, rgb<span class="op">=</span><span class="va">False</span>, channel_axis<span class="op">=</span><span class="dv">0</span>, scale<span class="op">=</span>[<span class="fl">0.35</span>, <span class="fl">0.2047619</span>, <span class="fl">0.2047619</span>])</span></code></pre>
</div>
<p>Each image layer in Napari has a <code>.scale</code> which is
equivalent to the pixel size. We can check this is set correctly
with:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Get the first image layer</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>image_layer <span class="op">=</span> viewer.layers[<span class="dv">0</span>]</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># Print its scale</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="bu">print</span>(image_layer.scale)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># [z y x]
[0.35 0.2047619 0.2047619]</code></pre>
</div>
<div id="automatically-setting-scale" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="automatically-setting-scale" class="callout-inner">
<h3 class="callout-title">Automatically setting scale</h3>
<div class="callout-content">
<p>Depending on the BioIO reader you use, you may find that
<code>.scale</code> is set automatically from the image metadata when
you open it in <code>napari</code> (via drag and drop or
<code>File &gt; Open File(s)...</code>).</p>
<p>It’s always worth checking the <code>.scale</code> property is set
correctly before making measurements from your images. You can set the
<code>.scale</code> of an already open image layer with:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>image_layer.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.2047619</span>, <span class="fl">0.2047619</span>)</span></code></pre>
</div>
</div>
</div>
</div>
<div id="pixel-size-scale" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="pixel-size-scale" class="callout-inner">
<h3 class="callout-title">Pixel size / scale</h3>
<div class="callout-content">
<p>Copy and paste the following into Napari’s console to get
<code>image_layer_1</code>, <code>image_layer_2</code> and
<code>image_layer_3</code> of the yeast image:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>image_layer_1 <span class="op">=</span> viewer.layers[<span class="dv">0</span>]</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>image_layer_2 <span class="op">=</span> viewer.layers[<span class="dv">1</span>]</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>image_layer_3 <span class="op">=</span> viewer.layers[<span class="dv">2</span>]</span></code></pre>
</div>
<ol style="list-style-type: decimal"><li>Check the <code>.scale</code> of each layer - are they the
same?</li>
<li>Set the scale of layer 3 to (0.35, 0.4, 0.4) - what changes in the
viewer?</li>
<li>Set the scale of layer 3 to (0.35, 0.4, 0.2047619) - what changes in
the viewer?</li>
<li>Set the scale of all layers so they are half as wide and half as
tall as their original size in the viewer</li>
</ol></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="section level3">
<h3 id="section">1<a class="anchor" aria-label="anchor" href="#section"></a></h3>
<p>All layers have the same scale</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">print</span>(image_layer_1.scale)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="bu">print</span>(image_layer_2.scale)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="bu">print</span>(image_layer_3.scale)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[0.35 0.2047619 0.2047619]
[0.35 0.2047619 0.2047619]
[0.35 0.2047619 0.2047619]</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="section-1">2<a class="anchor" aria-label="anchor" href="#section-1"></a></h3>
<figure><img src="../fig/yeast-exercise-2.png" alt="Yeast image shown in Napari with layer 3  twice as big in y and x" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>image_layer_3.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span>)</span></code></pre>
</div>
<p>You should see that layer 3 becomes about twice as wide and twice as
tall as the other layers. This is because we set the pixel size in y and
x (which used to be 0.2047619μm) to about twice its original value (now
0.4μm).</p>
</div>
<div class="section level3">
<h3 id="section-2">3<a class="anchor" aria-label="anchor" href="#section-2"></a></h3>
<figure><img src="../fig/yeast-exercise-3.png" alt="Yeast image shown in Napari with layer 3  twice as big in y" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>image_layer_3.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.4</span>, <span class="fl">0.2047619</span>)</span></code></pre>
</div>
<p>You should see that layer 3 appears squashed - with the same width as
other layers, but about twice the height. This is because we set the
pixel size in y (which used to be 0.2047619μm) to about twice its
original value (now 0.4μm). Bear in mind that setting the pixel sizes
inappropriately can lead to stretched or squashed images like this!</p>
</div>
<div class="section level3">
<h3 id="section-3">4<a class="anchor" aria-label="anchor" href="#section-3"></a></h3>
<figure><img src="../fig/yeast-exercise-4.png" alt="Yeast image shown in Napari with all layers  half size in y/x" class="figure mx-auto d-block"></figure><p>We set the pixel size in y/x to half its original value of
0.2047619μm:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>image_layer_1.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.10238095</span>, <span class="fl">0.10238095</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>image_layer_2.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.10238095</span>, <span class="fl">0.10238095</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>image_layer_3.scale <span class="op">=</span> (<span class="fl">0.35</span>, <span class="fl">0.10238095</span>, <span class="fl">0.10238095</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="choosing-a-file-format">Choosing a file format<a class="anchor" aria-label="anchor" href="#choosing-a-file-format"></a></h2>
<hr class="half-width"><p>Now that we’ve seen an example of browsing metadata in Napari, let’s
look more closely into how we can decide on a file format. There are
many factors to consider, including:</p>
<div class="section level3">
<h3 id="dimension-support">Dimension support<a class="anchor" aria-label="anchor" href="#dimension-support"></a></h3>
<p>Some file formats will only support certain dimensions e.g. 2D, 3D, a
specific number of channels… For example, .png and .jpg only support 2D
images (either grayscale or RGB), while .tiff can support images with
many more dimensions (including any number of channels, time, 2D and 3D
etc.).</p>
</div>
<div class="section level3">
<h3 id="metadata-support">Metadata support<a class="anchor" aria-label="anchor" href="#metadata-support"></a></h3>
<p>As mentioned above, image metadata is a very important record of how
an image was acquired and what it represents. Different file formats
have different standards for how to store metadata, and what kind of
metadata they accept. This means that converting between file formats
often results in loss of some metadata.</p>
</div>
<div class="section level3">
<h3 id="compatibility-with-software">Compatibility with software<a class="anchor" aria-label="anchor" href="#compatibility-with-software"></a></h3>
<p>Some image analysis software will only support certain image file
formats. If a format isn’t supported, you will likely need to make a
copy of your data in a new format.</p>
</div>
<div class="section level3">
<h3 id="proprietary-vs-open-formats">Proprietary vs open formats<a class="anchor" aria-label="anchor" href="#proprietary-vs-open-formats"></a></h3>
<p>Many light microscopes will save data automatically into their own
proprietary file formats (owned by the microscope company). For example,
Zeiss microscopes often save files to a format with a .czi extension,
while Leica microscopes often use a format with a .lif extension. These
formats will retain all the metadata used during acquisition, but are
often difficult to open in software that wasn’t created by the same
company.</p>
<p><a href="https://www.openmicroscopy.org/bio-formats/" class="external-link">Bio-Formats</a>
is an open-source project that helps to solve this problem - allowing
over 100 file formats to be opened in many pieces of open source
software. BioIO (that we used earlier in this episode) integrates with
Bio-Formats to allow many different file formats to be opened in Napari.
Bio-Formats is really essential to allow us to work with these multitude
of formats! Even so, it won’t support absolutely everything, so you will
likely need to convert your data to another file format sometimes. If
so, it’s good practice to use an open file format whose specification is
freely available, and can be opened in many different pieces of software
e.g. OME-TIFF.</p>
</div>
<div class="section level3">
<h3 id="compression">Compression<a class="anchor" aria-label="anchor" href="#compression"></a></h3>
<p>Different file formats use different types of ‘compression’.
Compression is a way to reduce image file sizes, by changing the way
that the image pixel values are stored. There are many different
compression algorithms that compress files in different ways.</p>
<p>Many compression algorithms rely on finding areas of an image with
similar pixel values that can be stored in a more efficient way. For
example, imagine a row of 30 pixels from an 8-bit grayscale image:</p>
<figure><img src="../fig/image-line.png" alt="Diagram of a line of 30 pixels - 10 with pixel  value 50, then 10 with pixel value 100, then 10 with pixel value 150" class="figure mx-auto d-block"></figure><p>Normally, this would be stored as 30 individual pixel values, but we
can reduce this greatly by recognising that many of the pixel values are
the same. We could store the exact same data with only 6 values: 10 50
10 100 10 150, showing that there are 10 values with pixel value 50,
then 10 with value 100, then 10 with value 150. This is the general idea
behind ‘run-length encoding’ and many compression algorithms use similar
principles to reduce file sizes.</p>
<p>There are two main types of compression:</p>
<ul><li><p><strong>Lossless compression</strong> algorithms are reversible -
when the file is opened again, it can be reversed perfectly to give the
exact same pixel values.</p></li>
<li><p><strong>Lossy compression</strong> algorithms reduce the size by
irreversibly altering the data. When the file is opened again, the pixel
values will be different to their original values. Some image quality
may be lost via this process, but it can achieve much smaller file
sizes.</p></li>
</ul><p>For microscopy data, you should therefore use a file format with no
compression, or lossless compression. Lossy compression should be
avoided as it degrades the pixel values and may alter the results of any
analysis that you perform!</p>
<div id="compression-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="compression-1" class="callout-inner">
<h3 class="callout-title">Compression</h3>
<div class="callout-content">
<p>Let’s remove all layers from the Napari viewer, and open the
‘00001_01.ome.tiff’ dataset. You should have already downloaded this to
your working directory as part of the <a href="index.html#setup">setup
instructions</a>.</p>
<p>Run the code below in Napari’s console. This will save a specific
timepoint of this image (time = 30) as four different file formats
(.tiff, .png + low and high quality .jpg). Note: these files will be
written to the same folder as the ‘00001_01.ome.tiff’ image!</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="im">import</span> imageio.v3 <span class="im">as</span> iio</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># Get the 00001_01.ome layer, and get timepoint = 30</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>layer <span class="op">=</span> viewer.layers[<span class="st">"00001_01.ome"</span>]</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>image <span class="op">=</span> layer.data[<span class="dv">30</span>, :, :]</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="co"># Save as different file formats in same folder as 00001_01.ome</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>folder_path <span class="op">=</span> Path(layer.source.path).parent</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>iio.imwrite( folder_path <span class="op">/</span> <span class="st">"test-tiff.tiff"</span>, image)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>iio.imwrite( folder_path <span class="op">/</span> <span class="st">"test-png.png"</span>, image)</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>iio.imwrite( folder_path <span class="op">/</span> <span class="st">"test-jpg-high-quality.jpg"</span>, image, quality<span class="op">=</span><span class="dv">75</span>)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>iio.imwrite( folder_path <span class="op">/</span> <span class="st">"test-jpg-low-quality.jpg"</span>, image, quality<span class="op">=</span><span class="dv">30</span>)</span></code></pre>
</div>
<ul><li><p>Go to the folder where ‘00001_01.ome.tiff’ was saved and look at
the file sizes of the newly written images (<code>test-tiff</code>,
<code>test-png</code>, <code>test-jpg-high-quality</code> and
<code>test-jpg-low-quality</code>). Which is biggest? Which is
smallest?</p></li>
<li><p>Open all four images in Napari. Zoom in very close to a bright
nucleus, and try showing / hiding different layers with the <img src="https://raw.githubusercontent.com/napari/napari/main/src/napari/resources/icons/visibility.svg" alt="A screenshot of Napari's eye button" height="30" class="figure"> icon. How
do they differ? How does each compare to timepoint 30 of the original
‘00001_01.ome’ image?</p></li>
<li><p>Which file formats use lossy compression?</p></li>
</ul></div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="section level3">
<h3 id="file-sizes">File sizes<a class="anchor" aria-label="anchor" href="#file-sizes"></a></h3>
<p>‘test_tiff’ is largest, followed by ‘test-png’, then
‘test-jpg-high-quality’, then ‘test-jpg-low-quality’.</p>
</div>
<div class="section level3">
<h3 id="differences-to-original">Differences to original<a class="anchor" aria-label="anchor" href="#differences-to-original"></a></h3>
<p>By showing/hiding different layers, you should see that ‘test-tiff’
and ‘test-png’ look identical to the original image (when its slider is
set to timepoint 30). In contrast, both jpg files show blocky artefacts
around the nuclei - the pixel values have clearly been altered. This
effect is worse in the low quality jpeg than the high quality one.</p>
</div>
<div class="section level3">
<h3 id="lossy-compression">Lossy compression<a class="anchor" aria-label="anchor" href="#lossy-compression"></a></h3>
<p>Both jpg files use lossy compression, as they alter the original
pixel values. The low quality jpeg compresses the file more than the
high quality jpeg, resulting in smaller file sizes, but also worse
alteration of the pixel values. The rest of the file formats (.tiff /
.png) use no compression, or lossless compression - so their pixel
values are identical to the original values.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="handling-of-large-image-data">Handling of large image data<a class="anchor" aria-label="anchor" href="#handling-of-large-image-data"></a></h3>
<p>If your images are very large, you may need to use a pyramidal file
format that is specialised for handling them. Pyramidal file formats
store images at multiple resolutions (and usually in small chunks) so
that they can be browsed smoothly without having to load all of the
full-resolution data. This is similar to how google maps allows browsing
of its vast quantities of map data. Specialised software like <a href="https://qupath.github.io/" class="external-link">QuPath</a>, <a href="https://imagej.net/plugins/bdv/" class="external-link">Fiji’s BigDataViewer</a> and <a href="https://www.openmicroscopy.org/omero/" class="external-link">OMERO’s viewer</a> can
provide smooth browsing of these kinds of images.</p>
<p>See below for an example image pyramid (using napari’s Cells (3D +
2Ch) sample image) with three different resolution levels stored. Each
level is about twice as small the last in x and y:</p>
<figure><img src="../fig/image-pyramid.png" style="width:40.0%" alt="Diagram of an image pyramid with three  resolution levels" class="figure mx-auto d-block"></figure></div>
</section><section><h2 class="section-heading" id="common-file-formats">Common file formats<a class="anchor" aria-label="anchor" href="#common-file-formats"></a></h2>
<hr class="half-width"><p>As we’ve seen so far, there are many different factors to consider
when choosing file formats. As different file formats have various pros
and cons, it is very likely that you will use different formats for
different purposes. For example, having one file format for your raw
acquisition data, another for some intermediate analysis steps, and
another for making diagrams and figures for display. Pete Bankhead’s
bioimage book has a great chapter on <a href="https://bioimagebook.github.io/chapters/1-concepts/6-files/files.html" class="external-link">Files
&amp; file formats</a> that explores this in detail.</p>
<p>To finish this episode, let’s look at some common file formats you
are likely to encounter (this table is from <a href="https://bioimagebook.github.io/chapters/1-concepts/6-files/files.html#table-file-formats" class="external-link">Pete
Bankhead’s bioimage book</a> which is released under a CC-BY 4.0
license):</p>
<table class="table"><colgroup><col width="14%"><col width="17%"><col width="17%"><col width="17%"><col width="34%"></colgroup><thead><tr class="header"><th align="left">Format</th>
<th align="left">Extensions</th>
<th align="left">Main use</th>
<th align="left">Compression</th>
<th align="left">Comment</th>
</tr></thead><tbody><tr class="odd"><td align="left">TIFF</td>
<td align="left">.tif, .tiff</td>
<td align="left">Analysis, display (print)</td>
<td align="left">None, lossless, lossy</td>
<td align="left">Very general image format</td>
</tr><tr class="even"><td align="left">OME-TIFF</td>
<td align="left">.ome.tif, .ome.tiff</td>
<td align="left">Analysis, display (print)</td>
<td align="left">None, lossless, lossy</td>
<td align="left">TIFF, with standardized metadata for microscopy</td>
</tr><tr class="odd"><td align="left">Zarr</td>
<td align="left">.zarr</td>
<td align="left">Analysis</td>
<td align="left">None, lossless, lossy</td>
<td align="left">Emerging format, great for big datasets – but limited
support currently</td>
</tr><tr class="even"><td align="left">PNG</td>
<td align="left">.png</td>
<td align="left">Display (web, print)</td>
<td align="left">Lossless</td>
<td align="left">Small(ish) file sizes without compression
artefacts</td>
</tr><tr class="odd"><td align="left">JPEG</td>
<td align="left">.jpg, .jpeg</td>
<td align="left">Display (web)</td>
<td align="left">Lossy (usually)</td>
<td align="left">Small file sizes, but visible artefacts</td>
</tr></tbody></table><p>Note that there are many, many proprietary microscopy file formats in
addition to these! You can get a sense of how many by browsing
Bio-Formats list of <a href="https://bio-formats.readthedocs.io/en/v7.1.0/supported-formats.html" class="external-link">supported
formats</a>.</p>
<p>You’ll also notice that many file formats support different types of
compression e.g. none, lossless or lossy (as well as different
compression settings like the ‘quality’ we saw on jpeg images earlier).
You’ll have to make sure you are using the right kind of compression
when you save images into these formats.</p>
<p>To summarise some general recommendations:</p>
<ul><li><p>During acquisition, it’s usually a good idea to use whatever the
standard proprietary format is for that microscope. This will ensure you
retain as much metadata as possible, and have maximum compatibility with
that company’s acquisition and analysis software.</p></li>
<li><p>During analysis, sometimes you can directly use the format you
acquired your raw data in. If it’s not supported, or you need to save
new images of e.g.  sub-regions of an image, then it’s a good idea to
switch to one of the formats in the table above specialised for analysis
(TIFF and OME-TIFF are popular choices).</p></li>
<li><p>Finally, for display, you will need to use common file formats
that can be opened in any imaging software (not just scientific) like
png, jpeg or tiff. Note that jpeg usually uses lossy compression, so
it’s only advisable if you need very small file sizes (for example, for
displaying many images on a website).</p></li>
</ul><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul><li>Image files contain pixel values and metadata.</li>
<li>Metadata is an important record of how an image was acquired and
what it represents.</li>
<li>BioIO allows many more image file formats to be opened in Napari,
along with providing access to some metadata.</li>
<li>Pixel size states how large a pixel is in physical units
(e.g. micrometre).</li>
<li>Compression can be lossless or lossy - lossless is best for
microscopy images.</li>
<li>There are many, many different microscopy file formats. The best
format to use depends on your use-case e.g. acquisition, analysis or
display.</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/multi-dimensional-images.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/designing-a-light-microscopy-experiment.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/multi-dimensional-images.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Multi-dimensional
        </a>
        <a class="chapter-link float-end" href="../instructor/designing-a-light-microscopy-experiment.html" rel="next">
          Next: Designing a light...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/HealthBioscienceIDEAS/microscopy-novice/edit/main/episodes/filetypes-and-metadata.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/HealthBioscienceIDEAS/microscopy-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/HealthBioscienceIDEAS/microscopy-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/HealthBioscienceIDEAS/microscopy-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/HealthBioscienceIDEAS/varnish/tree/IDEAS" class="external-link">varnish (1.0.3.9000)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://HealthBioscienceIDEAS.github.io/microscopy-novice/instructor/filetypes-and-metadata.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Filetypes and metadata",
  "creativeWorkStatus": "active",
  "url": "https://HealthBioscienceIDEAS.github.io/microscopy-novice/instructor/filetypes-and-metadata.html",
  "identifier": "https://HealthBioscienceIDEAS.github.io/microscopy-novice/instructor/filetypes-and-metadata.html",
  "dateCreated": "2023-10-26",
  "dateModified": "2025-10-29",
  "datePublished": "2025-10-31"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

